(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e9349"],{"8d18":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"角色ID"}},[a("a-input",{attrs:{placeholder:"请输入"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"状态"}},[a("a-select",{attrs:{placeholder:"请选择","default-value":"0"}},[a("a-select-option",{attrs:{value:"0"}},[t._v("全部")]),a("a-select-option",{attrs:{value:"1"}},[t._v("正常")]),a("a-select-option",{attrs:{value:"2"}},[t._v("禁用")])],1)],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("span",{staticClass:"table-page-search-submitButtons"},[a("a-button",{attrs:{type:"primary"}},[t._v("查询")]),a("a-button",{staticStyle:{"margin-left":"8px"}},[t._v("重置")])],1)])],1)],1)],1),a("s-table",{ref:"table",attrs:{size:"default",columns:t.columns,data:t.loadData},scopedSlots:t._u([{key:"expandedRowRender",fn:function(e){return a("div",{staticStyle:{margin:"0"}},[a("a-row",{style:{marginBottom:"12px"},attrs:{gutter:24}},t._l(e.permissions,(function(e,n){return a("a-col",{key:n,style:{marginBottom:"12px"},attrs:{span:12}},[a("a-col",{attrs:{span:4}},[a("span",[t._v(t._s(e.permissionName)+"：")])]),e.actionEntitySet.length>0?a("a-col",{attrs:{span:20}},t._l(e.actionEntitySet,(function(e,n){return a("a-tag",{key:n,attrs:{color:"cyan"}},[t._v(t._s(e.describe))])})),1):a("a-col",{attrs:{span:20}},[t._v("-")])],1)})),1)],1)}},{key:"action",fn:function(e,n){return a("span",{},[a("a",{on:{click:function(e){return t.$refs.modal.edit(n)}}},[t._v("编辑")]),a("a-divider",{attrs:{type:"vertical"}}),a("a-dropdown",[a("a",{staticClass:"ant-dropdown-link"},[t._v(" 更多 "),a("a-icon",{attrs:{type:"down"}})],1),a("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[a("a-menu-item",[a("a",{attrs:{href:"javascript:;"}},[t._v("详情")])]),a("a-menu-item",[a("a",{attrs:{href:"javascript:;"}},[t._v("禁用")])]),a("a-menu-item",[a("a",{attrs:{href:"javascript:;"}},[t._v("删除")])])],1)],1)],1)}}])}),a("role-modal",{ref:"modal",on:{ok:t.handleOk}})],1)},s=[],i=(a("4160"),a("d81d"),a("159b"),a("2af9")),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-modal",{attrs:{title:"操作",width:800,visible:t.visible,"confirm-loading":t.confirmLoading},on:{ok:t.handleOk,cancel:t.handleCancel}},[a("a-steps",{attrs:{current:1}},[a("a-step",[a("template",{slot:"title"},[t._v(" Finished ")]),a("span",{attrs:{slot:"description"},slot:"description"},[t._v("This is a description.")])],2),a("a-step",{attrs:{title:"In Progress",description:"This is a description."}}),a("a-step",{attrs:{title:"Waiting",description:"This is a description."}})],1)],1)},r=[],l=(a("d3b7"),{name:"RoleModal",data:function(){return{labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},visible:!1,confirmLoading:!1,mdl:{},form:this.$form.createForm(this),permissions:[]}},created:function(){this.loadPermissions()},methods:{add:function(){this.edit({id:0})},edit:function(t){var e=this;if(this.mdl=Object.assign({},t),this.visible=!0,this.mdl.permissions&&this.permissions){var a={};this.mdl.permissions.forEach((function(t){a[t.permissionId]=t.actionEntitySet.map((function(t){return t.action}))})),this.permissions.forEach((function(t){t.selected=a[t.id]||[]}))}this.$nextTick((function(){e.form.setFieldsValue(e.$g.pick(e.mdl,"id","name","status","describe"))})),console.log("this.mdl",this.mdl)},close:function(){this.$emit("close"),this.visible=!1},handleOk:function(){var t=this;this.form.validateFields((function(e,a){e||(console.log("form values",a),t.confirmLoading=!0,new Promise((function(t){setTimeout((function(){return t()}),2e3)})).then((function(){t.$message.success("保存成功"),t.$emit("ok")})).catch((function(){})).finally((function(){t.confirmLoading=!1,t.close()})))}))},handleCancel:function(){this.close()},onChangeCheck:function(t){t.indeterminate=!!t.selected.length&&t.selected.length<t.actionsOptions.length,t.checkedAll=t.selected.length===t.actionsOptions.length},onChangeCheckAll:function(t,e){Object.assign(e,{selected:t.target.checked?e.actionsOptions.map((function(t){return t.value})):[],indeterminate:!1,checkedAll:t.target.checked})},loadPermissions:function(){}}}),c=l,d=a("2877"),u=Object(d["a"])(c,o,r,!1,null,"02bd1956",null),m=u.exports,h=a("b775"),p="",f={role:"".concat(p,"/other/role")};function v(t){return Object(h["b"])({url:f.role,method:"get",data:t})}var b={name:"TableList",components:{STable:i["r"],RoleModal:m},data:function(){var t=this;return{description:"列表使用场景：后台管理中的权限管理以及角色管理，可用于基于 RBAC 设计的角色权限控制，颗粒度细到每一个操作类型。",visible:!1,form:null,mdl:{},advanced:!1,queryParam:{},columns:[{title:"唯一识别码",dataIndex:"id"},{title:"角色名称",dataIndex:"name"},{title:"状态",dataIndex:"status"},{title:"创建时间",dataIndex:"createTime",sorter:!0},{title:"操作",width:"150px",dataIndex:"action",scopedSlots:{customRender:"action"}}],loadData:function(e){var a=Object.assign(e,t.queryParam);return v(a).then((function(t){return t.data}))},selectedRowKeys:[],selectedRows:[]}},watch:{},methods:{handleEdit:function(t){this.mdl=Object.assign({},t),this.mdl.permissions.forEach((function(t){t.actionsOptions=t.actionEntitySet.map((function(t){return{label:t.describe,value:t.action,defaultCheck:t.defaultCheck}}))})),console.log(this.mdl),this.visible=!0},handleOk:function(){this.$refs.table.refresh()},onChange:function(t,e){this.selectedRowKeys=t,this.selectedRows=e},toggleAdvanced:function(){this.advanced=!this.advanced}}},g=b,k=Object(d["a"])(g,n,s,!1,null,null,null);e["default"]=k.exports}}]);